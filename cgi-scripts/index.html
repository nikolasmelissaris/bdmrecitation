<!DOCTYPE html>
	<html>
		<head>
			<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114828137-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-114828137-1');
</script>



			<meta charset='utf-8' /> 
			<title>BDM Recitation</title>
			<!-- link to main stylesheet --> 
			<link rel="stylesheet" type="text/css" href="/bdmrecitation/css/main.css">
			<!--<link rel="stylesheet" type="text/css" href="/bdmrecitation/highlight/styles/default.css">-->
			<script src="/bdmrecitation/highlight/highlight.pack.js"></script>
			<script>hljs.initHighlightingOnLoad();</script>
	<!--<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autorun=true"></script>-->
			<link rel='stylesheet' href='/bdmrecitation/css/mobile.css' />
			<link href='https://fonts.googleapis.com/css?family=Droid+Sans'
              rel='stylesheet' />
			<link rel='icon' type='image/png' href='/bdmrecitation/images/rbsicon.png' />
        <meta name='viewport' content='width=device-width, initial-scale=1.0' />
		</head>
		<body>
			<img class='background' src='/bdmrecitation/images/rbs.jpeg' alt='The school.' />

        <div class='credits-info'>
            <span>i</span>

            <div id='credits'>
                This site was made with ❤️
                in Westfield, NJ.<br/>

		    Photo by <a href='https://www.prnewswire.com/news-releases/rutgers-business-school-to-host-community-roundtable-as-a-way-of-inspiring-private-public--partnerships-around-economic-development-social-change-300129499.html'>Cision</a>, 
			   <br/>
		    
		    Many thanks to my buddy <a href='https://dionyziz.com/'>Dionysis</a> for letting me use his beautiful layout.
            </div>
        </div>

        <section><div>
          
		<strong><h2>CGI-Scripts</h2></strong>
		
		<h4>A word of caution</h4>
		<p>I would like to remind you that it is very good practice to learn how to use a Virtual Machine in order to
			learn in a sandbox environment. Many of the things that you will do when playing around with Apache will
			require elevated priviledges, so be careful.</p>
		
		<h4>Installing Apache</h4>
		
		<p>Students using <strong>Windows</strong> may download Apache from
		<a href="https://www.apachelounge.com/download/">here.</a>
		<strong>macOS</strong> ships with Apache so you probably don't need to do something for now.</p>

		
		<h4>Configuring Apache</h4>
	<p>We will edit some configuration files to have Apache serve content from the directory that you want. 
		First you need to locate <code>httpd.conf</code> and open it with your favorite text editor. In order to edit
		<code>httpd.conf</code> you need elevated priviledges so the easiest way it would be to open it using 
		<code>sudo</code> on Mac:
		<pre class="tty">$ <span class="ttytype">sudo vim httpd.conf</span></pre>
		You can replace <code>vim</code> with the command to open your text editor. You need to be in the proper
		directory, probably that would be <code>/etc/apache2</code>.</p>
		
		<p>On Windows, you need to <code>Run as Administrator</code> in order to be able to make changes to
			<code>sudo</code>. The file will be in the directory that you unpacked when you downloaded Apache.</p>
		
		<p>In <code>httpd.conf</code> you will find <emph>a lot</emph> of lines. Some that are of interest to us are
		the following:</p>
		
		<p>Find this line:
			
		<pre class="tty"><code class="bash">LoadModule cgi_module libexec/apache2/mod_cgi.so</code></pre>
		and uncomment it.</p>
		<p>Apache needs to know that a particular directory is set aside for CGI programs. 
		Apache will assume that every file in this directory 
		is a CGI program, and will attempt to execute it, 
			when that particular resource is requested by a client. This is done by 
			<code>ScriptAlias</code>. For example by default in Mac there will be a line
			<pre class="tty"><code class="bash">ScriptAliasMatch ^/cgi-bin/((?!(?i:webobjects)).*$) "/Library/WebServer/CGI-Executables/$1"</code></pre>
			which means that there is a preset ScriptAlias for the <code>/cgi-bin/</code> to 
			<code>/Library/WebServer/CGI-Executables/</code>. You can change this to whatever folder you want
			to use.</p>
	<p>Next we want to find the following:
<pre class="tty"><code class="bash"> &lt;Directory "/Library/WebServer/CGI-Executables"&gt;
    AllowOverride None
    Allow from all
    Options ExecCGI
    Require all granted
    AddHandler cgi-script .py
&lt;/Directory&gt; </code></pre>
		This will not be exactly as you see it as I have added the lines that you need to type in.</p>
		
		
<p>Now we simply run:
<pre class="tty">$ <span class="ttytype">python3 db_swords.py</span>
((1, 'Frodo', 'Sword', 'Hobbit'), (2, 'Sam', 'Sword', 'Hobbit'))</pre>
		

<p>For our second example, we will get just the names of all the heroes that are of the Hobbit race.
	We will save it under <code>db_hobbits.py</code>.</p>
<p><pre class="tty"><code class="python">import pymysql

# Open connection to the database
db = pymysql.connect("localhost","root","mypassword","fellowship_of_the_ring" )

# Start a cursor object using cursor() method
cursor = db.cursor()

# Execute a SQL query using execute() method. This should return all the columns of heroes that use swords.
cursor.execute("SELECT names FROM heroes WHERE race='Hobbit';")

# Fetch all the rows using fetchall() method.
data = cursor.fetchall()
print (data)

# disconnect from server
db.close()</code></pre></p>
		
<p>Now we simply run:
<pre class="tty">$ <span class="ttytype">python3 db_hobbits.py</span>
(('Frodo',), ('Sam',))</pre></p>

<p>For our next example we will add a hero to the Fellowship. We will name the file <code>db_boromir.py</code></p>
<p><pre class="tty"><code class="python">import pymysql

# Open database connection. Notice the autocommit. What is it doing there?
db = pymysql.connect("localhost","root","mypassword","fellowship_of_the_ring", autocommit=True)

# Start a cursor object using cursor() method
cursor = db.cursor()

# Create entry
sql = """INSERT INTO heroes (name, weapon, race) VALUES
('Boromir','Sword','Man')"""

cursor.execute(sql)

# Create query to check if all our heroes are in the table
sql_ret = """SELECT * FROM heroes"""
cursor.execute(sql_ret)
heroes = cursor.fetchall()

print (heroes)

# disconnect from server
db.close()</code></pre></p>

<p>Now we simply run:
<pre class="tty">$ <span class="ttytype">python3 db_boromir.py</span>
((1, 'Frodo', 'Sword', 'Hobbit'), (2, 'Sam', 'Sword', 'Hobbit'), (3, 'Gandalf', 'Staff', 'Istari'), 
(4, 'Gimli', 'Axe', 'Dwarf'), (5, 'Legolas', 'Bow', 'Elf'), (7, 'Boromir', 'Sword', 'Man'))</pre>


            </div></section>
			
			
    </body>
</html>
